{% extends '@Synapse/admin/_layout.html.twig' %}

{% block admin_content %}
	<header class="syn-header">
		<div>
			<h1 class="syn-title">Tableau de Bord</h1>
			<p class="syn-subtitle">Vue d'ensemble de l'activité de l'assistant</p>
		</div>
	</header>

	<!-- KPIs -->
	<div
		class="syn-grid-3" style="margin-bottom: 2rem;">
		<!-- Conversations -->
		<div class="syn-card syn-card-hover p-4" style="padding: 1.5rem; display: flex; align-items: center; gap: 1.5rem;">
			<div class="syn-kpi-icon success">
				<i data-lucide="message-circle"></i>
			</div>
			<div>
				<div class="syn-kpi-label">Conversations (24h)</div>
				<div class="syn-kpi-value">{{ kpis.active_conversations }}</div>
				{% if kpis.active_conversations > 0 %}
					<div class="syn-kpi-sub" style="color: var(--syn-color-success); display: flex; align-items: center; gap: 0.25rem;">
						<i data-lucide="trending-up" style="width: 14px; height: 14px;"></i>
						En activité
					</div>
				{% else %}
					<div class="syn-kpi-sub">Aucune activité récente</div>
				{% endif %}
			</div>
		</div>

		<!-- Risques -->
		<div class="syn-card syn-card-hover" style="padding: 1.5rem; display: flex; align-items: center; gap: 1.5rem;">
			<div class="syn-kpi-icon error">
				<i data-lucide="shield-alert"></i>
			</div>
			<div>
				<div class="syn-kpi-label">Risques en attente</div>
				<div class="syn-kpi-value" style="color: var(--syn-color-error);">{{ kpis.risks_pending }}</div>
				<div class="syn-kpi-sub">Nécessitent une action</div>
			</div>
		</div>

		<!-- Tokens -->
		<div class="syn-card syn-card-hover" style="padding: 1.5rem; display: flex; align-items: center; gap: 1.5rem;">
			<div class="syn-kpi-icon warning">
				<i data-lucide="coins"></i>
			</div>
			<div>
				<div class="syn-kpi-label">Coût Estimé</div>
				<div class="syn-kpi-value">€{{ kpis.tokens_cost|number_format(5, '.', ' ') }}</div>
				<div class="syn-kpi-sub">Usage depuis le début du mois</div>
			</div>
		</div>
	</div>

	<!-- System Status -->
	<div class="syn-card">
		<div class="syn-card-header">
			<h3 style="font-size: 1.1rem;">État du Système</h3>
		</div>
		<div class="syn-table-container">
			<table class="syn-table">
				<tbody>
					<tr>
						<td style="display: flex; align-items: center; gap: 1rem;">
							<div class="syn-kpi-icon primary" style="width: 40px; height: 40px; font-size: 1.2rem;">
								<i data-lucide="lock"></i>
							</div>
							<div>
								<div style="font-weight: 600;">Chiffrement Server-Side</div>
								<div style="font-size: 0.85rem; color: var(--syn-text-muted);">Sodium Library</div>
							</div>
						</td>
						<td style="text-align: right;">
							<span class="syn-badge syn-badge-success">Actif</span>
						</td>
					</tr>
					<tr>
						<td style="display: flex; align-items: center; gap: 1rem;">
							<div class="syn-kpi-icon primary" style="width: 40px; height: 40px; font-size: 1.2rem;">
								<i data-lucide="sparkles"></i>
							</div>
							<div>
								<div style="font-weight: 600;">API Vertex AI</div>
								<div style="font-size: 0.85rem; color: var(--syn-text-muted);">Google Gemini 2.5</div>
							</div>
						</td>
						<td style="text-align: right;">
							<span class="syn-badge syn-badge-success">Connecté</span>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
{% endblock %}
