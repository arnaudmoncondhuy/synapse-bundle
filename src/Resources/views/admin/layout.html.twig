<!DOCTYPE html>
<html lang="fr" class="syn-admin-root">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{% block title %}Synapse Admin
			{% endblock %}
		</title>

		{# Default Styles #}
		{% block stylesheets %}
			{% include '@Synapse/admin/_styles.html.twig' %}
		{% endblock %}

		<script src="https://unpkg.com/lucide@latest"></script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
	</head>
	<body
		class="syn-layout">

		{# SIDEBAR #}
		<aside class="syn-sidebar">
			<div class="syn-brand">
				<div class="syn-brand-icon">
					<i data-lucide="brain-circuit"></i>
				</div>
				Synapse
			</div>

			<nav>
				<ul class="syn-nav">
					<li class="syn-nav-item">
						<a href="{{ path('synapse_admin_dashboard') }}" class="{% if app.request.get('_route') == 'synapse_admin_dashboard' %}active{% endif %}">
							<i data-lucide="layout-dashboard"></i>
							Dashboard
						</a>
					</li>
					<li class="syn-nav-item">
						<a href="{{ path('synapse_admin_analytics') }}" class="{% if app.request.get('_route') == 'synapse_admin_analytics' %}active{% endif %}">
							<i data-lucide="bar-chart-2"></i>
							Analytics
						</a>
					</li>
					<li class="syn-nav-item">
						<a href="{{ path('synapse_admin_risks') }}" class="{% if app.request.get('_route') starts with 'synapse_admin_risks' %}active{% endif %}">
							<i data-lucide="shield-alert"></i>
							Ange Gardien
							{% if kpis.risks_pending|default(0) > 0 %}
								<span class="syn-badge syn-badge-warning syn-badge-nav">{{ kpis.risks_pending }}</span>
							{% endif %}
						</a>
					</li>
					<li class="syn-nav-item">
						<a href="{{ path('synapse_admin_config') }}" class="{% if app.request.get('_route') == 'synapse_admin_config' %}active{% endif %}">
							<i data-lucide="settings"></i>
							Configuration
						</a>
					</li>
				</ul>
			</nav>

			<div style="margin-top: auto; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.05); font-size: 0.8rem; color: var(--syn-text-muted);">
				Synapse Bundle v2.0
				<br>Made with ❤️ by MakerLab
			</div>
		</aside>

		{# MAIN CONTENT #}
		<main
			class="syn-main">
			{# Flash Messages #}
			{% for message in app.flashes('success') %}
				<div class="syn-alert syn-alert-success">
					<i data-lucide="check-circle"></i>
					<div>{{ message }}</div>
				</div>
			{% endfor %}

			{% for message in app.flashes('error') %}
				<div class="syn-alert syn-alert-error">
					<i data-lucide="alert-circle"></i>
					<div>{{ message }}</div>
				</div>
			{% endfor %}

			{% block admin_content %}{% endblock %}
		</main>

		{% block javascripts %}
			<script>
				lucide.createIcons();
			</script>
		{% endblock %}
	</body>
</html>
