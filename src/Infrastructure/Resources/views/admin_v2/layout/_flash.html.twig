{#
    Synapse Admin V2 â€” Flash Messages
    Affiche les messages flash Symfony dans des toasts glassmorphism.
#}
{% set flashes_success = app.flashes('success') %}
{% set flashes_error   = app.flashes('error') %}
{% set flashes_warning = app.flashes('warning') %}

{% if flashes_success or flashes_error or flashes_warning %}
<div class="sv2-flash-container" role="alert" aria-live="polite">
    {% for message in flashes_success %}
        <div class="sv2-flash sv2-flash--success">
            <i data-lucide="check-circle-2"></i>
            <span class="sv2-flash__text">{{ message }}</span>
        </div>
    {% endfor %}

    {% for message in flashes_error %}
        <div class="sv2-flash sv2-flash--error">
            <i data-lucide="alert-circle"></i>
            <span class="sv2-flash__text">{{ message }}</span>
        </div>
    {% endfor %}

    {% for message in flashes_warning %}
        <div class="sv2-flash sv2-flash--warning">
            <i data-lucide="alert-triangle"></i>
            <span class="sv2-flash__text">{{ message }}</span>
        </div>
    {% endfor %}
</div>

<script>
    (function () {
        // Auto-dismiss flash messages after 4 seconds
        const container = document.querySelector('.sv2-flash-container');
        if (!container) return;

        Array.from(container.children).forEach(function (flash, i) {
            setTimeout(function () {
                flash.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
                flash.style.opacity = '0';
                flash.style.transform = 'translateX(16px) scale(0.96)';
                setTimeout(function () { flash.remove(); }, 400);
            }, 4000 + i * 600);
        });
    })();
</script>
{% endif %}
